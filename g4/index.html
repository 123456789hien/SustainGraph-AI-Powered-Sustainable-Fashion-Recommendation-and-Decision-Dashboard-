<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SustainGraph â€” Sustainable Fashion Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Táº¤T Cáº¢ FILE PHáº¢I á»ž CÃ™NG THÆ¯ Má»¤C Vá»šI index.html -->
    <link rel="stylesheet" href="style.css" />

    <!-- D3 cho táº¥t cáº£ charts + TensorFlow.js cho LSTM & SIS Regression -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js"></script>
  </head>
  <body>
    <div id="app-root">
      <header class="app-header">
        <div class="brand-block">
          <h1>SustainGraph</h1>
          <p
            title="Client-side AI dashboard: SIS, clustering, EDA, ML regression, LSTM forecast"
          >
            AI-powered sustainable fashion recommendation & decision dashboard
            (client-side, GitHub Pages).
          </p>
        </div>
      </header>

      <main class="app-main">
        <!-- LEFT COLUMN: DATA + FILTERS + KPI -->
        <section class="panel panel-left">
          <!-- 1. Upload -->
          <section class="card">
            <h2>1. Upload CSV Dataset</h2>
            <p class="subnote">
              Use your Kaggle sustainable fashion CSV or auto-load from the repo.
            </p>
            <div class="upload-row">
              <div class="upload-main">
                <label class="field-label">Choose File</label>
                <input
                  type="file"
                  id="fileUpload"
                  accept=".csv"
                  title="Upload your Kaggle_sust_dataset.csv or any compatible CSV"
                />
                <button
                  id="load-sample"
                  class="btn secondary-btn"
                  title="Load Kaggle_sust_dataset.csv from the same folder as index.html"
                >
                  Load Local CSV (Kaggle_sust_dataset.csv)
                </button>
              </div>
              <div class="upload-auto">
                <label class="field-label">Auto Upload from GitHub</label>
                <button
                  id="auto-upload"
                  class="btn primary-btn"
                  title="Fetch CSV directly from raw GitHub URL configured in script.js"
                >
                  Auto Upload Dataset
                </button>
              </div>
            </div>
            <div id="load-status" class="status-chip"></div>
          </section>

          <!-- 2. Filters -->
          <section class="card">
            <h2>2. Filters & Sustainability Priority</h2>
            <div class="filters-grid">
              <div class="field">
                <label class="field-label">Brand</label>
                <select
                  id="brand-filter"
                  title="Optional: filter by specific brand if needed"
                ></select>
              </div>
              <div class="field">
                <label class="field-label">Country</label>
                <select
                  id="country-filter"
                  title="Filter brands by country of operation"
                ></select>
              </div>
              <div class="field">
                <label class="field-label">Material</label>
                <select
                  id="material-filter"
                  title="Core filter: choose material type for focused analysis"
                ></select>
              </div>
              <div class="field">
                <label class="field-label">Year</label>
                <select
                  id="year-filter"
                  title="Restrict analysis to a specific year"
                ></select>
              </div>
              <div class="field">
                <label class="field-label">Certification</label>
                <select
                  id="cert-filter"
                  title="Filter by sustainability certifications"
                ></select>
              </div>
              <div class="field">
                <label class="field-label">Market Trend</label>
                <select
                  id="trend-filter"
                  title="Filter by market trend segment"
                ></select>
              </div>
            </div>

            <div class="priority-row">
              <div class="field">
                <label class="field-label">
                  Sustainability Priority (Price vs SIS)
                </label>
                <select
                  id="priority"
                  title="Higher weight = more sustainability focus, lower weight = more price focus"
                >
                  <option value="0.7">Maximize Sustainability</option>
                  <option value="0.5" selected>Balanced (SIS & Price)</option>
                  <option value="0.3">Budget Friendly</option>
                </select>
              </div>
              <button
                id="run-pipeline"
                class="btn run-btn"
                title="Run full pipeline: SIS, clustering, EDA, recommendations and forecast"
              >
                ðŸš€ Run Analysis & Recommendations
              </button>
            </div>
          </section>

          <!-- 3. KPI -->
          <section class="card">
            <h2>3. Key Sustainability Indicators</h2>
            <div id="kpi-row" class="kpi-row"></div>
          </section>
        </section>

        <!-- RIGHT COLUMN: ML + VISUALS + EDA + FORECAST -->
        <section class="panel panel-right">
          <!-- 4. SIS ML Regression Model -->
          <section class="card">
            <h2>4. SIS ML Regression Model</h2>
            <p class="subnote">
              Trains a neural regression model (TensorFlow.js) to approximate SIS
              from carbon, water, waste, policy scores and price for scenario
              analysis.
            </p>
            <button
              id="train-sis-ml"
              class="btn ml-btn"
              title="Train SIS regression model on the current filtered dataset"
            >
              ðŸ§  Train SIS Regression Model
            </button>
            <div id="ml-status" class="status-chip ml-status"></div>
            <div id="ml-metrics" class="ml-metrics"></div>
          </section>

          <!-- 5. PCA Map -->
          <section class="card">
            <h2>5. Materials Impact Map (PCA-style)</h2>
            <div id="pca-plot" class="plot"></div>
            <div id="material-clusters" class="cluster-legend"></div>
          </section>

          <!-- 6. Recommendations -->
          <section class="card">
            <h2>6. Top Sustainable Recommendations</h2>
            <p class="subnote">
              Ranked by hybrid score: SIS Ã— priority + price sensitivity.
            </p>
            <div id="recommendations-list" class="reco-list"></div>
          </section>

          <!-- 7. EDA â€” Materials -->
          <section class="card">
            <h2>7. EDA â€” Materials: SIS & Price</h2>
            <div id="eda-material-chart" class="plot small-plot"></div>
            <div id="eda-material-note" class="eda-note"></div>
          </section>

          <!-- 8. EDA â€” Countries -->
          <section class="card">
            <h2>8. EDA â€” Countries: SIS & Price</h2>
            <div id="eda-country-chart" class="plot small-plot"></div>
            <div id="eda-country-note" class="eda-note"></div>
          </section>

          <!-- 9. EDA â€” Years -->
          <section class="card">
            <h2>9. EDA â€” Years: SIS & Price</h2>
            <div id="eda-year-chart" class="plot small-plot"></div>
            <div id="eda-year-note" class="eda-note"></div>
          </section>

          <!-- 10. LSTM Forecast (luÃ´n á»Ÿ cuá»‘i) -->
          <section class="card">
            <h2>10. LSTM Forecast â€” SIS Trend by Year</h2>
            <div id="forecast-chart" class="plot small-plot"></div>
            <div id="forecast-note" class="eda-note"></div>
          </section>
        </section>
      </main>

      <footer class="app-footer">
        <span>
          Dataset: Sustainable Fashion &amp; Eco-Friendly Trends (Kaggle).
          Deployed as a static GitHub Pages dashboard.
        </span>
      </footer>
    </div>

    <!-- Logic and UI scripts -->
    <script src="app.js"></script>
    <script src="script.js"></script>
  </body>
</html>
