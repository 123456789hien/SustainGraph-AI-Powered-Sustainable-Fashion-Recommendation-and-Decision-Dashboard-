<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>SustainGraph â€” Sustainable Fashion Intelligence Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Layout, UI/UX giá»¯ nguyÃªn -->
    <link rel="stylesheet" href="style.css" />

    <!-- D3.js + TensorFlow.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js"></script>
</head>

<body>
<div id="app-root">

    <!-- HEADER -->
    <header class="app-header">
        <div class="brand-block">
            <h1>SustainGraph</h1>
            <p>
                AI-powered sustainability intelligence platform integrating  
                Entropy SIS-B, Pareto Frontier Aâ€“C, Elbow Validation &  
                interactive EDA for fashion brands.
            </p>
        </div>
    </header>

    <!-- MAIN GRID -->
    <main class="app-main">

        <!-- LEFT PANEL -->
        <section class="panel panel-left">

            <!-- 1. DATA LOAD -->
            <section class="card">
                <h2>1. Load Dataset</h2>
                <p class="subnote">
                    Upload Kaggle dataset or auto-load default CSV from GitHub.
                </p>

                <div class="upload-row">
                    <div class="upload-main">
                        <label class="field-label">Upload CSV</label>
                        <input type="file" id="fileUpload" accept=".csv" />

                        <button id="load-sample" class="btn secondary-btn">
                            Load Local CSV
                        </button>
                    </div>

                    <div class="upload-auto">
                        <label class="field-label">Auto-load from GitHub</label>
                        <button id="auto-upload" class="btn primary-btn">
                            Auto Upload
                        </button>
                    </div>
                </div>

                <div id="load-status" class="status-chip"></div>
            </section>

            <!-- FILTERS -->
            <section class="card">
                <h2>2. Filters & SIS Priorities</h2>

                <div class="filters-grid">
                    <div class="field">
                        <label class="field-label">Country</label>
                        <select id="country-filter"></select>
                    </div>

                    <div class="field">
                        <label class="field-label">Material</label>
                        <select id="material-filter"></select>
                    </div>

                    <div class="field">
                        <label class="field-label">Year</label>
                        <select id="year-filter"></select>
                    </div>

                    <div class="field">
                        <label class="field-label">Certification</label>
                        <select id="cert-filter"></select>
                    </div>

                    <div class="field">
                        <label class="field-label">Trend</label>
                        <select id="trend-filter"></select>
                    </div>
                </div>

                <!-- SIS PRIORITY -->
                <div class="priority-row">
                    <div class="field">
                        <label class="field-label">SIS Weight Strategy</label>
                        <select id="priority">
                            <option value="entropy" selected>Entropy SIS-B (Recommended)</option>
                            <option value="balanced">Balanced SIS</option>
                            <option value="eco">Eco Priority</option>
                            <option value="price">Budget Priority</option>
                        </select>
                    </div>

                    <button id="run-pipeline" class="btn run-btn">
                        ðŸš€ Run Analysis
                    </button>
                </div>
            </section>

            <!-- KPI -->
            <section class="card">
                <h2>3. Sustainability Metrics</h2>
                <div id="kpi-row" class="kpi-row"></div>
            </section>

        </section>

        <!-- RIGHT PANEL -->
        <section class="panel panel-right">

            <!-- GLOBAL SIS -->
            <section class="card">
                <h2>4. Global Sustainability Index (Entropy SIS-B)</h2>
                <p class="subnote">
                    Environmental group (COâ‚‚, Water, Waste) + Policy group (Rating, Eco, Recycling)  
                    â†’ weighted by entropy variability.
                </p>

                <div id="global-sis-plot" class="plot"></div>
                <div id="global-sis-insight" class="insight-box"></div>
            </section>

            <!-- MATERIAL PCA -->
            <section class="card">
                <h2>5. Material Environmental Map</h2>
                <p class="subnote">Visual clustering of materials by COâ‚‚, water and waste intensity.</p>

                <div id="pca-plot" class="plot"></div>
                <div id="material-clusters" class="cluster-legend"></div>
                <div id="pca-insight" class="insight-box"></div>
            </section>

            <!-- ELBOW METHOD -->
            <section class="card">
                <h2>6. Optimal Cluster Validation (Elbow Method)</h2>

                <div class="chart-container">
                    <div id="elbow-material-plot" class="plot small-plot"></div>
                    <div id="elbow-material-insight" class="insight-box"></div>
                </div>

                <div class="chart-container">
                    <div id="elbow-brand-plot" class="plot small-plot"></div>
                    <div id="elbow-brand-insight" class="insight-box"></div>
                </div>
            </section>

            <!-- PARETO ANALYSIS -->
            <section class="card">
                <h2>7. Pareto Frontier â€” Price vs SIS</h2>
                <p class="subnote">A: Brand Frontier â€¢ B: Material Frontier â€¢ C: Global Frontier</p>

                <div class="chart-container">
                    <div id="pareto-brand" class="plot small-plot"></div>
                    <div id="pareto-brand-insight" class="insight-box"></div>
                </div>

                <div class="chart-container">
                    <div id="pareto-material" class="plot small-plot"></div>
                    <div id="pareto-material-insight" class="insight-box"></div>
                </div>

                <div class="chart-container">
                    <div id="pareto-global" class="plot small-plot"></div>
                    <div id="pareto-global-insight" class="insight-box"></div>
                </div>
            </section>

            <!-- RECOMMENDATIONS -->
            <section class="card">
                <h2>8. Top Sustainable Fashion Recommendations</h2>
                <p class="subnote">Ranked using Entropy SIS-B + trade-off preferences.</p>

                <div id="recommendations-list" class="reco-list"></div>
            </section>

        </section>
    </main>

    <!-- FOOTER -->
    <footer class="app-footer">
        <span>
            Dataset: Sustainable Fashion (Kaggle) â€¢ 100% Client-Side â€¢ GitHub Pages â€¢  
            SustainGraph Research Framework: Entropy SIS-B â€¢ Pareto Frontier â€¢ Elbow Method
        </span>
    </footer>
</div>

<!-- CORE LOGIC -->
<script src="app.js"></script>
<script src="script.js"></script>

</body>
</html>
