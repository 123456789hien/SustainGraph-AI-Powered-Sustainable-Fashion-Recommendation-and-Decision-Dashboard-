<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SustainGraph â€” Sustainable Fashion Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- All files (index.html, style.css, app.js, script.js, Kaggle_sust_dataset.csv) stay in the same folder -->
    <link rel="stylesheet" href="style.css" />

    <!-- D3 for charts, TF.js optional (kept for future ML extensions) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js"></script>
  </head>
  <body>
    <div id="app-root">
      <!-- HEADER -->
      <header class="app-header">
        <div class="brand-block">
          <h1>SustainGraph</h1>
          <p>
            AI-powered sustainable fashion recommendation & decision dashboard
            (client-side, GitHub Pages).
          </p>
        </div>
      </header>

      <!-- MAIN LAYOUT -->
      <main class="app-main">
        <!-- LEFT COLUMN: DATA + FILTERS + KPI -->
        <section class="panel panel-left">
          <!-- 1. UPLOAD -->
          <section class="card">
            <h2>1. Upload CSV Dataset</h2>
            <p class="subnote">
              Use the Kaggle sustainable fashion CSV or auto-load from your GitHub repository.
            </p>
            <div class="upload-row">
              <div class="upload-main">
                <label class="field-label">Choose File</label>
                <input type="file" id="fileUpload" accept=".csv" />
                <button id="load-sample" class="btn secondary-btn">
                  Load Local CSV (Kaggle_sust_dataset.csv)
                </button>
              </div>
              <div class="upload-auto">
                <label class="field-label">Auto Upload from GitHub</label>
                <button id="auto-upload" class="btn primary-btn">
                  Auto Upload Dataset
                </button>
              </div>
            </div>
            <div id="load-status" class="status-chip"></div>
          </section>

          <!-- 2. FILTERS + PRIORITY -->
          <section class="card">
            <h2>2. Filters & Sustainability Preference</h2>
            <div class="filters-grid">
              <div class="field">
                <label class="field-label">Country</label>
                <select id="country-filter"></select>
              </div>
              <div class="field">
                <label class="field-label">Material</label>
                <select id="material-filter"></select>
              </div>
              <div class="field">
                <label class="field-label">Year</label>
                <select id="year-filter"></select>
              </div>
              <div class="field">
                <label class="field-label">Certification</label>
                <select id="cert-filter"></select>
              </div>
              <div class="field">
                <label class="field-label">Market Trend</label>
                <select id="trend-filter"></select>
              </div>
            </div>

            <div class="priority-row">
              <div class="field">
                <label class="field-label">
                  Recommendation Focus (SIS vs Price)
                </label>
                <select id="priority">
                  <option value="0.7">Maximize Sustainability</option>
                  <option value="0.5" selected>Balanced (SIS & Price)</option>
                  <option value="0.3">Budget Friendly</option>
                </select>
              </div>
              <button id="run-pipeline" class="btn run-btn">
                ðŸš€ Run Analysis & Recommendations
              </button>
            </div>
          </section>

          <!-- 3. KPIs -->
          <section class="card">
            <h2>3. Key Sustainability Indicators</h2>
            <div id="kpi-row" class="kpi-row"></div>
          </section>
        </section>

        <!-- RIGHT COLUMN: MAP + ANALYTICS + RECOMMENDER -->
        <section class="panel panel-right">
          <!-- 4. MATERIAL IMPACT MAP -->
          <section class="card">
            <h2>4. Material Impact Map (PCA-style)</h2>
            <p class="subnote">
              Materials grouped by combined COâ‚‚, water and waste footprint. Colors show impact clusters.
            </p>
            <div id="pca-plot" class="plot"></div>
            <div id="material-clusters" class="cluster-legend"></div>
          </section>

          <!-- 5. PORTFOLIO INSIGHTS (CHART + INSIGHT AROUND SIS & PRICE) -->
          <section class="card">
            <h2>5. Portfolio Insights by Materials, Markets & Time</h2>
            <p class="subnote">
              Price and Sustainability Index (SIS) patterns across materials, countries, trends and years based on current filters.
            </p>

            <div class="eda-grid">
              <!-- MATERIAL -->
              <div class="eda-chart">
                <div class="eda-chart-left">
                  <h3 class="eda-title">Materials â€” Avg Price (bars) & Avg SIS (line)</h3>
                  <div id="eda-material" class="plot small-plot"></div>
                </div>
                <div id="eda-material-insight" class="eda-insight"></div>
              </div>

              <!-- COUNTRY -->
              <div class="eda-chart">
                <div class="eda-chart-left">
                  <h3 class="eda-title">Countries â€” Avg Price (bars) & Avg SIS (line)</h3>
                  <div id="eda-country" class="plot small-plot"></div>
                </div>
                <div id="eda-country-insight" class="eda-insight"></div>
              </div>

              <!-- TREND -->
              <div class="eda-chart">
                <div class="eda-chart-left">
                  <h3 class="eda-title">Market Trends â€” Volume (bars) & Avg SIS (line)</h3>
                  <div id="eda-trend" class="plot small-plot"></div>
                </div>
                <div id="eda-trend-insight" class="eda-insight"></div>
              </div>

              <!-- YEAR -->
              <div class="eda-chart">
                <div class="eda-chart-left">
                  <h3 class="eda-title">Years â€” Avg Price (bars) & Avg SIS (line)</h3>
                  <div id="eda-year" class="plot small-plot"></div>
                </div>
                <div id="eda-year-insight" class="eda-insight"></div>
              </div>
            </div>
          </section>

          <!-- 6. CLUSTERING VALIDATION (ELBOW METHOD) -->
          <section class="card">
            <h2>6. Clustering Validation (Elbow Method)</h2>
            <p class="subnote">
              Evaluating how many clusters are justified for materials and brands using SSE curves.
            </p>
            <div class="eda-grid">
              <!-- MATERIAL ELBOW -->
              <div class="eda-chart">
                <div class="eda-chart-left">
                  <h3 class="eda-title">Material Clusters â€” Elbow Curve</h3>
                  <div id="elbow-material" class="plot small-plot"></div>
                </div>
                <div id="elbow-material-insight" class="eda-insight"></div>
              </div>

              <!-- BRAND ELBOW -->
              <div class="eda-chart">
                <div class="eda-chart-left">
                  <h3 class="eda-title">Brand Clusters â€” Elbow Curve</h3>
                  <div id="elbow-brand" class="plot small-plot"></div>
                </div>
                <div id="elbow-brand-insight" class="eda-insight"></div>
              </div>
            </div>
          </section>

          <!-- 7. PARETO FRONTIER (PRICEâ€“SIS) -->
          <section class="card">
            <h2>7. Pareto-Optimal Sustainable Choices</h2>
            <p class="subnote">
              Products and materials on the Pareto frontier: improving price would worsen SIS and vice versa.
            </p>
            <div class="eda-grid">
              <!-- MATERIAL PARETO -->
              <div class="eda-chart">
                <div class="eda-chart-left">
                  <h3 class="eda-title">Materials â€” Pareto Frontier (Price vs SIS)</h3>
                  <div id="pareto-material" class="plot small-plot"></div>
                </div>
                <div id="pareto-material-insight" class="eda-insight"></div>
              </div>

              <!-- BRAND PARETO -->
              <div class="eda-chart">
                <div class="eda-chart-left">
                  <h3 class="eda-title">Brands â€” Pareto Frontier (Price vs SIS)</h3>
                  <div id="pareto-brand" class="plot small-plot"></div>
                </div>
                <div id="pareto-brand-insight" class="eda-insight"></div>
              </div>
            </div>
          </section>

          <!-- 8. TOP RECOMMENDATIONS -->
          <section class="card">
            <h2>8. Top Sustainable Recommendations</h2>
            <p class="subnote">
              Ranked by hybrid score combining entropy-based SIS and price sensitivity, according to your chosen priority.
            </p>
            <div id="recommendations-list" class="reco-list"></div>
          </section>
        </section>
      </main>

      <!-- FOOTER -->
      <footer class="app-footer">
        <span>
          Dataset: Sustainable Fashion &amp; Eco-Friendly Trends (Kaggle).
          Deployed as a static GitHub Pages dashboard with 100% client-side computation.
        </span>
      </footer>
    </div>

    <!-- Logic and UI scripts (same folder as this index.html) -->
    <script src="app.js"></script>
    <script src="script.js"></script>
  </body>
</html>
